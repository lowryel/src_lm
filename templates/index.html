{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LM ESTATE</title>
    <link rel="stylesheet" href="{% static './css/style.css' %}">
    <!-- <script src="{% static 'https://unpkg.com/htmx.org@1.9.3' %}" integrity="sha384-lVb3Rd/Ca0AxaoZg5sACe8FJKF0tnUgR2Kd7ehUOG5GCcROv5uBIZsOqovBAcWua" crossorigin="anonymous"></script> -->
</head>
<body class="main-body" id="container">
    <main>
        <header class="header">
            <div class="header-nav">
                <a style="text-decoration: none;" href="{% url 'home' %}"><h1>LM Estate</h1></a>
                <a href="#contact">Reach Out</a>         
            </div>
            <div class="search">
                <form action="" method="post">
                    {% csrf_token %}
                    <input type="text" name="q" id="value" value="{{q}}" placeholder="Search by: price, location, status"
                        hx-post="{% url 'home' %}"
                        hx-trigger="keyup delay:500ms"
                        hx-target="#card-list"
                        hx-swap="innerHTML"
                    >
                    <button>Search</button>                     
                </form>
            </div>
        </header>
        {% block content %}
        <section class="main-estate">
            <main class="main-section">
                <div class="pages">
                    <h2>Property List</h2>
                    <div class="props">
                        {% include 'snippets/property-card.html' %}
                    </div>
                    <div id="card-list"></div>
                </div>
                <div class="pages">
                    <h2>Find Agents</h2>
                    <div class="agencies">
                        {% for agent in agency %}
                        <div class="agency">
                            <div class="owner-info">
                                <img src="{% static './img/dream-house.jpg' %}" alt="">
                                <a href="{% url 'agent-list' agent.id %}"><p><b>{{agent.agency_name}}</b></p></a>
                            </div>
                            <div class="owner-info-text">
                                <p>Number of properties listed: {{agent.property_count}}</p>
                                <p>Agency Location: {{agent.agent_location}}</p>
                                <p>Registered Since: {{agent.date_registered | timesince}}</p>                     
                            </div>
                        </div>
                        {% endfor %}

                        <p class="more-owners"><a href="">More</a></p>
                    </div>
                </div> 
         
            </main>
            <div class="testimony-section">
                <div class="testimony">
                    <h2>What people say</h2>
                    <div class="testimony-list">
                        <div class="testimony-a">
                            <p><b>Eugene</b></p>
                            <p>"I was so nervous about selling my house, but working with at LM Estate made the whole process so much easier. She was knowledgeable, responsive, and always went the extra mile to help me find the right buyer. I would highly recommend her to anyone looking to buy or sell a home."</p>
                        </div>
                        <div class="testimony-a">
                            <p><b>Edem</b></p>
                            <p>"I had been looking for a new home for months, and I was starting to get discouraged. But then I met LM Estate, and everything changed. She showed me a great selection of homes, and she was always available to answer my questions. I ended up buying my dream home, and it's all thanks to her."</p>
                        </div>
                        <div class="testimony-a">
                            <p><b>Abena</b></p>
                            <p>"I was a first-time homebuyer, and I didn't know what to expect. But LM Estate was so patient and understanding. She took the time to explain everything to me, and she made sure that I was comfortable with every step of the process. I couldn't have asked for a better agent."</p>
                        </div>                            
                    </div>
                </div>
            </div>

            <div class="pagination">
                <div class="step-links">
                {% if property_list.has_previous %}
                    <a href="?page=1">&laquo; first</a>
                    <a href="?page={{ property_list.previous_page_number }}">previous</a>
                    {% endif %}
                    <span class="current">
                    Page {{ property_list.number }} of {{ property_list.paginator.num_pages }}.
                    </span>
                    {% if property_list.has_next %}
                    <a href="?page={{ property_list.next_page_number }}">next</a>
                    <a href="?page={{ property_list.paginator.num_pages }}">last &raquo;</a>
                {% endif %}
                </div>
            </div>
        </section>
        {% endblock %}
        <footer id="fooTER">
            <section class="footer menu">
                <main class="footer-div">
                    <div class="reachOut reach">
                        <div class="contact-info">
                            <h2>LM ESTATES</h2>
                            <li>Email:lmestates@lm.com</li>
                            <li>Phone: +233544598658</li>
                            <div>
                                <p>Location: Cresent Avenue</p>
                                <p>Hse No. 12, Damson Street</p>
                            </div>
                        </div>
                    </div>
                    <div id="contact" class="reachOut">
                        <p><b>Reach out to us for more enquiry</b></p>
                        <input type="email" name="email" placeholder="Email">
                        <button type="button">Submit</button>
                    </div>           
                </main>
            </section>
            <div style="text-align: center; color: rgb(53, 51, 50);">
                <i><b>Copyright &COPY; LM Estate 2023</b></i>
            </div>
        </footer>
    </main>

</body>
<script src="{% static './js/htmx.min.js' %}"></script>
<script>
    document.body.addEventListener('htmx:configRequest', (event) => {
      event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
    })
</script>
</html>